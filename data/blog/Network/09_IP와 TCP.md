---
title: Network_IP와 TCP/UDP
date: '2021-09-13'
tags: ['NETWORK']
draft: false
summary: 웹사이트의 주소 IP, 통신 단위 패킷
---

## IP

> IP(Interent Protocol)은 지정한 IP 주소에 패킷(Packet)이라는 통신 단위로 데이터를 전달한다. TCP/IP계층의 2번째 인터넷 계층, OSI 7계층의 3번째 네트워크 계층에 속하며 상위계층에서 전달된 데이터에 IP 패킷을 더해 IP주소에 따라 전달하는 라우팅 기능을 담당한다.

💡 **IP 패킷이란?**

IP패킷은 마치 우제국 송장처럼 전송 데이터를 무사히 전송하기 위해 출발지 IP, 목적지 IP와 같은 정보를 담고있다. 서버가 무사히 데이터를 전송받는다면 서버의 응답도 IP 패킷을 통해 클라이언트에 전달된다.

### IP 프로토콜의 특징

- 정확한 출발지와 목적지를 파악할 수 있다.
- 패킷을 받을 서버가 없거나 서비스 불능 상태에도 전송된다.(비연결성)
- 중간에 패킷이 사라질 수 있다. 서버와 클라이언트는 이를 파악할 방법이 없다.(비신뢰성)
- 패킷의 순서를 보장할 수 없다. 하나의 데이터가 용랑이 크면 여러개의 패킷으로 나뉘어 전달되는데 이때 패킷이 서로 다른 노드(서버컴퓨터)를 거쳐 전달되면서 순서가 변경될 수 있다.(비신뢰성)

## TCP

> TCP/IP 계층의 3번째 전송계층에 속하며 IP 프로토콜의 단점인 비연결성과 비신뢰성을 보완한다.

💡 **전송 계층(Transport Layer)란?**
End Point 간 신뢰성 있는 데이터 전송을 담당하는 계층이다. 여기서 신뢰성이란 데이터를 안정적으로 전달할 수 있는지를 의미하며 전송이란 목적지에 해당하는 프로세스에 데이터를 전달하는 것을 말한다.

데이터 전송 단계에서 IP 패킷이 생성되기 전, TCP 세그먼트가 먼저 생성된다. TCP 세그먼트에는 IP 패킷의 출발지 IP와 목적지 IP 정보를 보완하는 PORT번호와 전송제어, 데이터 순서, 검증 정보 등이 담겨있다.

이러한 정보는 TCP 세그먼트를 구성하는 TCP 헤더에 담겨있다.
![TCP 헤더](https://evan-moon.github.io/static/e1e371de646e3735c414e9a897af2db6/c7bb6/header-data-offset.png)

### TCP의 특징

- 연결 지향 (3way handshaking(가상 연결))
- 데이터 전달 보증(오류감지)
- 순서 보장
- 신뢰성(흐름, 혼잡 제어)

TCP의 가장 큰 특징인 3 way handshaking(connection open)과 4 way handshaking(connection close) 지난번에 자세하게 정리해놓았다.

[3 way handshaking 글 보러가기](https://chaein-p-devlog.vercel.app/blog/Network/06_TCP%EC%99%80%20UDP)

더불어 TCP는 데이터 전송이 성공적으로 이루어졌을 시 이에 대한 응답을 돌려주기 때문에 IP 패킷의 한계인 비연결성을 보완한다.

만약 패킷이 순서대로 도착하지 않으면 TCP 세그먼트의 헤더를 바탕으로 다시 패킷 전송을 요청할 수 있다.

TCP는 데이터의 신뢰성을 보장한다는 큰 장점이 있지만 매번 가상 연결을 거치며 패킷이 조금만 손실돼도 재전송을 진행하기 때문에 시간 손실이 크다.

## UDP

> UDP는 TCP와 같이 전송 계층에 위치한 프로토콜이다. 신뢰성은 높지만 속도는 느린 TCP와는 달린 신뢰성은 낮지만 빠른 전송 속도가 특징이다.

### UDP의 특징

- 하얀 도화지에 비유(기능이 거의 없음)
- 비연결지향 (TCP와 같이 3way handshake과정이 없음)
- 데이터 전달 보증 없음
- 데이터 전달 순서 보장하진 않음
- 체크섬을 통한 단순한 오류 검사를 진행해 최소한의 데이터 무결성 확보
- 단순하고 빠름
- TCP는 TCP 세그먼트 생성시 데이터를 쪼개지만 UDP는 쪼개지 않는다.
- 신뢰성 보다는 연속성이 중요한 서비스에 사용됨(실시간 스트리밍)
- HTTP3는 UDP 통신을 하는 대표적인 응용계층 프로토콜이다.

![UDP 헤더](https://blog.kakaocdn.net/dn/v9sjb/btqEInCmCFr/kBQ5KHnV2ZXMTrY4Iy74dk/img.png)

참조

- [[10분 테코톡] 👨‍🏫르윈의 TCP UDP](https://www.youtube.com/watch?v=ikDVGYp5dhg&t=201s)
